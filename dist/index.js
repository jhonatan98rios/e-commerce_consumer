(()=>{"use strict";var e={933:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=r(543),n=r(37),o=new s.Kafka({clientId:n.CLIENT_ID,brokers:n.BROKERS,retry:{initialRetryTime:n.INITIAL_RETRY_TIME,retries:n.RETRIES}});t.default=o},37:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FROM_BEGINNIG=t.GROUP_ID=t.TOPIC_NAME=t.CLIENT_ID=t.BROKERS=t.RETRIES=t.INITIAL_RETRY_TIME=t.DEFAULT_HEADER=t.PORT=void 0,t.PORT=3e3,t.DEFAULT_HEADER={"Content-Type":"application/json"},t.INITIAL_RETRY_TIME=1e3,t.RETRIES=10,t.BROKERS=["localhost:9092"],t.CLIENT_ID="my-app",t.TOPIC_NAME="topic-test",t.GROUP_ID="test-group",t.FROM_BEGINNIG=!0},103:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({id:e,content:t}){this.id=e,this.content=t}isValid(){const e=Object.getOwnPropertyNames(this).map((e=>this[e]?null:`${e} is missing`)).filter((e=>!!e));return{valid:0===e.length,error:e}}}},630:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(289)),o=s(r(915)),u=s(r(933));t.default={generateInstance:()=>{const e=new n.default({broker:u.default});return new o.default({messageConsumer:e})}}},281:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(657)),o=s(r(601));t.default={generateInstance:()=>{const e=new n.default({connection:""});return new o.default({orderRepository:e})}}},607:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(630)).default.generateInstance(),o=s(r(281)).default.generateInstance();n.subscribe(o)},657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({connection:e}){this.connection=e}async create(e){console.log(e)}}},915:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({messageConsumer:e}){this.messageConsumer=e}async subscribe(e){return this.messageConsumer.subscribe(e)}}},601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor({orderRepository:e}){this.orderRepository=e}async create(e){return this.orderRepository.create(e)}}},289:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(37),o=s(r(103));t.default=class{constructor({broker:e}){this.consumer=e.consumer({groupId:n.GROUP_ID})}async subscribe(e){await this.consumer.connect(),await this.consumer.subscribe({topic:n.TOPIC_NAME,fromBeginning:n.FROM_BEGINNIG}),await this.consumer.run({eachMessage:async({topic:t,partition:r,message:s})=>{if(s.value){let t=JSON.parse(s.value.toString());e.create(new o.default({id:t.id,content:t.content}))}}})}}},543:e=>{e.exports=require("kafkajs")}},t={};!function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}(607)})();